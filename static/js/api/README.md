# API Клиенты

## Обзор

API клиенты предоставляют удобный интерфейс для работы с бэкендом приложения. Архитектура построена на принципах наследования и централизованного управления.

## Структура

```
api/
├── baseClient.js      # Базовый класс для всех клиентов
├── apiManager.js      # Централизованное управление клиентами
├── authClient.js      # Клиент для аутентификации
├── vacancyClient.js   # Клиент для работы с вакансиями
├── stageClient.js     # Клиент для работы с этапами
└── constants.js       # Константы и сообщения об ошибках
```

## Основные компоненты

### BaseClient
Базовый класс для всех API клиентов с общей логикой:
- Автоматическое управление токенами
- Обработка ошибок HTTP
- Автоматическое обновление токенов при 401
- Валидация параметров

### ApiManager
Централизованное управление всеми клиентами:
- Установка токенов для всех клиентов
- Проверка статуса авторизации
- Получение клиентов по имени

### Специализированные клиенты
- **AuthClient**: Регистрация, вход, выход, обновление токенов
- **VacancyClient**: CRUD операции с вакансиями
- **StageClient**: CRUD операции с этапами вакансий

## Использование

```javascript
// Создание менеджера
const apiManager = new ApiManager();

// Установка токена для всех клиентов
apiManager.setAuthToken(token);

// Использование клиентов
const vacancies = await apiManager.vacancyClient.getVacancies();
const user = await apiManager.authClient.login(userData);
```

## Особенности

### Автоматическое обновление токенов
При получении 401 ошибки система автоматически:
1. Пытается обновить токен
2. Повторяет исходный запрос
3. При неудаче - выходит из системы

### Валидация параметров
Все методы клиентов включают валидацию входных параметров:
- Проверка типов данных
- Валидация обязательных полей
- Информативные сообщения об ошибках

### Обработка ошибок
Централизованная обработка ошибок с понятными сообщениями:
- 400: Некорректный запрос
- 401: Требуется авторизация
- 403: Доступ запрещен
- 404: Ресурс не найден
- 422: Ошибка валидации
- 500: Внутренняя ошибка сервера

## Принципы разработки

1. **DRY (Don't Repeat Yourself)** - переиспользование кода через наследование
2. **Single Responsibility** - каждый клиент отвечает за свой домен
3. **Open/Closed** - легко расширять без изменения существующего кода
4. **Dependency Inversion** - зависимость от абстракций, а не от конкретных реализаций

## Расширение

Для добавления нового клиента:
1. Создать класс, наследующий от BaseClient
2. Добавить валидацию параметров
3. Реализовать методы API
4. Добавить в ApiManager
5. Обновить документацию 